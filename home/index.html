<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Naptio — Privacy-first AI Baby Monitor (no sign-up, no cloud video)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Turn two devices into a private baby monitor. Local connection, on-device AI for cry & motion alerts. No sign-up, no cloud video.">
  <style>
    :root { color-scheme: dark; }

    html, body {
      height: 100%;
      margin: 0; background: #000; color: #fff;
      font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    a { color: #fff; text-decoration: none; opacity: 0.9; }
    a:hover, a:focus { text-decoration: underline; opacity: 1; }

    /* Don't underline specific links on hover/focus */
    .no-underline,
    .no-underline:hover,
    .no-underline:focus,
    .btn-pill,
    .btn-pill:hover,
    .btn-pill:focus { text-decoration: none; }

    /* Visually hidden but accessible text */
    .sr-only {
      position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
    }

    /* Utility: hide but keep in DOM for later */
    .is-hidden { display: none !important; }

    .page { min-height: 100%; display: flex; flex-direction: column; }

    header {
      display: grid;
      grid-template-columns: 1fr auto 1fr; /* left | center | right (wide screens) */
      align-items: center;
      padding: 14px 20px;
      gap: 12px;
    }
    /* Safe-area insets on the sides */
    header { padding-left: max(20px, env(safe-area-inset-left)); padding-right: max(20px, env(safe-area-inset-right)); }

    .nav-left, .nav-center, .nav-right {
      display: flex; gap: 18px; align-items: center;
      font-size: 0.95rem; white-space: nowrap;
    }
    .nav-left  { justify-self: start; }
    .nav-center{ justify-self: center; gap: 12px; flex-wrap: nowrap; min-width: 0; }
    .nav-right { justify-self: end; display:flex; gap:12px; flex-wrap: nowrap; }

    /* Home icon link (uses shared sprite) */
    .home-link { display: inline-flex; align-items: center; line-height: 1; }
    .home-link:hover, .home-link:focus { text-decoration: none; }

    /* Reusable icon sizing */
    .icon { width: var(--icon-size, 24px); height: var(--icon-size, 24px); display: block; }
    .icon-home { --icon-size: 26px; } /* Bigger Home icon */

    /* Center buttons (modes) */
    .nav-center a {
      color: #000; background: #fff; border-radius: 9999px; border: 1px solid #fff;
      opacity: 1; font-weight: 600; line-height: 1; display: inline-block; white-space: nowrap;
      font-size: clamp(0.78rem, 2.6vw, 0.95rem);
      padding: clamp(6px, 1.6vw, 8px) clamp(10px, 3.2vw, 14px);
    }
    .nav-center a:hover { background: #eaeaea; }

    /* Prevent underline on Camera / Viewer buttons */
    .nav-center a:hover,
    .nav-center a:focus { text-decoration: none; }
    .nav-center a:focus-visible { outline: 2px solid #fff; outline-offset: 3px; }

    /* Right-side pill buttons (pair/share) */
    .btn-pill {
      color: #fff; background: #000; border: 1px solid #fff; border-radius: 9999px;
      font-weight: 600; line-height: 1; display: inline-block; opacity: 1; white-space: nowrap;
      font-size: clamp(0.78rem, 2.6vw, 0.95rem);
      padding: clamp(6px, 1.6vw, 8px) clamp(10px, 3.2vw, 14px);
      transition: background-color .15s ease, box-shadow .15s ease;
    }
    .btn-pill:hover,
    .btn-pill:focus {
      background: #141414;
      border-color: #e6e6e6;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.16);
    }
    .btn-pill:focus-visible { outline: 2px solid #fff; outline-offset: 3px; }

    main { flex: 1; display: grid; place-items: center; padding: 24px; text-align: center; }
    .hero { max-width: 900px; }
    .brand {
      font-size: clamp(2.5rem, 6vw, 5rem);
      line-height: 1.05; letter-spacing: -0.012em; margin: 0 0 12px;
      font-weight: 900;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
    }
    .tagline { font-size: clamp(1.05rem, 2.5vw, 1.5rem); margin: 0 0 12px; opacity: 0.95; }

    /* ---- Free badge under tagline ---- */
    .badge-free {
      display: inline-flex; align-items: center; gap: 8px;
      margin-top: 8px; padding: 6px 10px;
      border-radius: 9999px; border: 1px solid #242424;
      background: #0a0a0a; color: #d9d9d9;
      font-size: 0.85rem; opacity: 0.95;
    }
    .badge-free .dot {
      width: 6px; height: 6px; border-radius: 50%; background: #5cf078;
    }
    @media (max-width:560px){ .badge-free{ font-size:.9rem; } }

    .subcopy { font-size: clamp(0.98rem, 2vw, 1.15rem); margin: 0 auto; opacity: 0.9; }

    /* Safety note (smaller, centered) */
    .safety-note { font-size: 0.8rem; opacity: 0.8; margin-top: 24px; text-align: center; }

    /* --- HERO CTAs --- */
    .hero-ctas {
      display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;
      margin-top: 16px;
    }
    .btn {
      appearance: none; border: 0; border-radius: 9999px; padding: 12px 16px;
      font-size: 16px; cursor: pointer; line-height: 1; font-weight: 600;
    }
    .btn-primary {
      background: #fff; color: #000;
    }
    .btn-primary:focus-visible { outline: 2px solid #7aa2ff; outline-offset: 2px; }
    .btn-ghost {
      background: rgba(255,255,255,0.12); color: #fff; border: 1px solid rgba(255,255,255,0.25);
    }
    .btn-ghost:focus-visible { outline: 2px solid #7aa2ff; outline-offset: 2px; }

    /* Hero "Pair devices" should mirror Camera (no underline + light grey on hover) */
    .hero-ctas .btn {
      display: inline-block;                  /* matches .nav-center a layout */
      transition: background-color .15s ease; /* subtle feedback */
    }
    .hero-ctas .btn,
    .hero-ctas .btn:hover,
    .hero-ctas .btn:focus { text-decoration: none; }
    
    .hero-ctas .btn-primary { 
      border: 1px solid #fff;                 /* optional: visually match Camera pill */
    }
    .hero-ctas .btn-primary:hover {
      background: #eaeaea;                    /* same grey as Camera pill */
      color: #000;
    }
    
    /* Footer */
    footer {
      display: flex; justify-content: space-between; align-items: center;
      padding: 16px 20px; font-size: 0.9rem; opacity: 0.85;
    }
    /* Safe-area insets on the sides */
    footer { padding-left: max(16px, env(safe-area-inset-left)); padding-right: max(16px, env(safe-area-inset-right)); }

    .footer-note {
      font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      font-size: 0.75rem; color: #fff; opacity: 0.85; text-decoration: none;
    }
    .footer-note:hover, .footer-note:focus { text-decoration: none; opacity: 0.85; }

    /* ---------------- Small screens: force modes BELOW pair/share + make modes bigger ---------------- */
    @media (max-width: 560px) {
      header {
        grid-template-columns: 1fr 1fr;
        grid-auto-rows: minmax(0, auto);
        row-gap: 10px;
      }
      .nav-left  { grid-column: 1; grid-row: 1; justify-self: start; }
      .nav-right { grid-column: 2; grid-row: 1; justify-self: end; gap: 10px; }
      .nav-center{
        grid-column: 1 / -1; /* span both columns */
        grid-row: 2;         /* second row */
        justify-content: center;
        gap: 12px;
        width: 100%;
      }
      /* Make center (mode) buttons larger than right-side pills on small screens */
      .nav-center a {
        font-size: clamp(0.92rem, 3.8vw, 1.12rem);
        padding: clamp(8px, 2.2vw, 12px) clamp(14px, 4.5vw, 18px);
      }
      /* Keep right-side pills compact so they don't collide */
      .btn-pill {
        font-size: clamp(0.78rem, 3.0vw, 0.92rem);
        padding: clamp(6px, 1.8vw, 8px) clamp(10px, 3.0vw, 14px);
      }
    }

    /* iPhone 12 mini (~360px): spacing tweaks */
    @media (max-width: 380px) {
      .nav-left a, .nav-right a { font-size: 0.82rem; }
      .nav-left, .nav-right { gap: 10px; }
      .nav-center { gap: 10px; }
      header { padding: 12px 14px; }
    }

    /* ============ Invite modal (with × close icon) ============ */
    .invite-modal {
      position: fixed; inset: 0; background: rgba(0,0,0,0.6);
      display: none; align-items: center; justify-content: center;
      z-index: 1000;
    }
    .invite-modal.visible { display: flex; }
    .invite-card {
      position: relative;
      width: min(92vw, 480px);
      background: #0b0b0b; border: 1px solid #141414; border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      padding: 18px 18px 20px;
    }
    .invite-header {
      display: flex; align-items: center; justify-content: center; margin-bottom: 8px;
    }
    .invite-title { font-size: 1rem; font-weight: 700; margin: 0; }
    .invite-close {
      position: absolute; top: 10px; right: 10px;
      width: 36px; height: 36px; border-radius: 9999px;
      display: grid; place-items: center;
      background: #0d0d0d; border: 1px solid #2a2a2a; color: #fff;
      font-size: 22px; line-height: 1; cursor: pointer;
    }
    .invite-close:hover { background: #111; }
    .invite-close:focus-visible { outline: 2px solid #fff; outline-offset: 2px; }

    .invite-body { display: grid; gap: 12px; justify-items: center; }
    .invite-qr {
      width: 220px; height: 220px; background: #111; border: 1px solid #222; border-radius: 12px;
      display: grid; place-items: center; overflow: hidden;
    }
    .invite-url {
      width: 100%; background: #090909; border: 1px solid #1a1a1a; color: #fff;
      border-radius: 10px; padding: 10px 12px; box-sizing: border-box; font-size: 0.9rem;
    }
    .invite-actions { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
    .invite-actions .btn-pill { border-color: #444; }

    /* Toast */
    .invite-toast {
      position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%) translateY(12px);
      background: #111; border: 1px solid #222; color: #fff; padding: 10px 14px;
      border-radius: 9999px; opacity: 0; transition: opacity .2s ease, transform .2s ease;
      z-index: 1100; font-size: 0.9rem;
    }
    .invite-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    /* ---- Scroll-aware header Pair CTA ---- */
    .header-pair { display: none; }
    .header-pair.is-sticky { display: inline-block; }

    /* Reduced-motion: neutralize transitions/animations */
    @media (prefers-reduced-motion: reduce){
      .btn-pill, .invite-toast, .yt-modal, .yt-player, .hero-ctas .btn { transition: none !important; animation: none !important; }
      html:focus-within { scroll-behavior: auto; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <nav class="nav-left" aria-label="Primary">
        <a href="https://hungryfaceai.github.io/hungryface/home" class="home-link" aria-label="Home" title="Home">
          <svg class="icon icon-home" aria-hidden="true" focusable="false">
            <use href="/hungryface/assets/icons.svg#icon-cradle-ai" xlink:href="/hungryface/assets/icons.svg#icon-cradle-ai"></use>
          </svg>
          <span class="sr-only">Home</span>
        </a>
        <a class="no-underline" href="https://hungryfaceai.github.io/hungryface/about">About</a>
      </nav>

      <nav class="nav-center" aria-label="Modes">
        <a href="https://hungryfaceai.github.io/hungryface/webrtc/sender/secure/" aria-label="Camera (Baby) — sender">
          Camera (Baby)
        </a>
        <a href="https://hungryfaceai.github.io/hungryface/webrtc/receiver/shared/alerts/dashboard/" aria-label="Viewer (Parent) — receiver">
          Viewer (Parent)
        </a>
      </nav>

      <nav class="nav-right" aria-label="Quick actions">
        <a class="is-hidden" href="https://hungryfaceai.github.io/hungryface/login">Log in</a>
        <a class="is-hidden" href="https://hungryfaceai.github.io/hungryface/signup">Sign up</a>

        <a class="btn-pill header-pair" href="https://hungryfaceai.github.io/hungryface/webrtc/pairpsk/" aria-label="Pair devices — quick pairing">
          Pair devices
        </a>

        <a id="menu-invite" class="btn-pill" href="#" aria-label="Share Naptio — show QR and share options" role="button">
          Share
        </a>
      </nav>
    </header>

    <main>
      <section class="hero" aria-labelledby="brand">
        <h1 id="brand" class="brand">Naptio</h1>
        <p class="tagline">AI that lets you switch off.</p>

        <!-- NEW: Free badge -->
        <p class="badge-free" aria-label="Free to use, no sign-up required">
          <span class="dot" aria-hidden="true"></span>
          Free to use, no sign-up required
        </p>

        <p class="subcopy">
          Turn two devices into a secure baby monitor.<br>
          On-device AI spots cues and motion, so you get timely, private alerts.<br>
          No cloud video, no extra hardware, no login.
        </p>

        <!-- HERO CTAs -->
        <div class="hero-ctas" role="group" aria-label="Get started">
          <a class="btn btn-primary" href="https://hungryfaceai.github.io/hungryface/webrtc/pairpsk/">Pair devices</a>
          <a class="btn btn-ghost" href="/hungryface/home/demo/" aria-label="Watch demo">
            ▶ Watch demo
          </a>
        </div>

        <!-- Helper text under CTAs -->
        <p class="safety-note" style="margin-top:10px;opacity:.85">
          First time? Tap <strong>Pair devices</strong>. Already paired? Open <strong>Camera</strong> or <strong>Viewer</strong>.
        </p>

        <p class="safety-note">
          Naptio provides informational insights and is not a medical device. <br>
          Always supervise your baby.
        </p>
      </section>
    </main>

    <footer role="contentinfo">
      <span class="footer-left footer-note">© 2025 Naptio</span>
      <a class="footer-right footer-note" href="https://hungryfaceai.github.io/hungryface/legal">Legal</a>
    </footer>
  </div>

  <!-- Invite Modal (unchanged structure; with focus trap added in JS) -->
  <div id="invite-modal" class="invite-modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="invite-title">
    <div class="invite-card">
      <button type="button" class="invite-close" aria-label="Close">
        &times;
      </button>
      <div class="invite-header">
        <h2 id="invite-title" class="invite-title">Share Naptio</h2>
      </div>
      <div class="invite-body">
        <div class="invite-qr">
          <img id="invite-qr" src="" alt="QR code" width="220" height="220" loading="lazy" />
        </div>
        <input id="invite-url" class="invite-url" type="text" readonly value="" aria-label="Shareable link" />
        <div class="invite-actions">
          <a id="invite-open" class="btn-pill" href="#" target="_blank" rel="noopener">Open</a>
          <button id="invite-copy" class="btn-pill" type="button">Copy</button>
          <button id="invite-share" class="btn-pill" type="button">Share</button>
        </div>
      </div>
    </div>
  </div>

  <script>
  // Standalone Invite Modal (existing) + focus trap
  (() => {
    const trigger  = document.getElementById('menu-invite');
    const modal    = document.getElementById('invite-modal');
    const qrImg    = document.getElementById('invite-qr');
    const urlInput = document.getElementById('invite-url');
    const btnCopy  = document.getElementById('invite-copy');
    const btnOpen  = document.getElementById('invite-open');
    const btnShare = document.getElementById('invite-share');
    const btnClose = modal?.querySelector('.invite-close');

    if (!trigger || !modal) return;

    const INVITE_URL = window.HF_INVITE_URL
      || (document.body && document.body.dataset && document.body.dataset.inviteUrl)
      || location.href;

    const QR_ENDPOINT = 'https://api.qrserver.com/v1/create-qr-code/?size=220x220&format=svg&data=';

    function toast(msg) {
      const el = document.createElement('div');
      el.className = 'invite-toast';
      el.textContent = msg;
      document.body.appendChild(el);
      requestAnimationFrame(() => el.classList.add('show'));
      setTimeout(() => {
        el.classList.remove('show');
        el.addEventListener('transitionend', () => el.remove(), { once: true });
      }, 1400);
    }

    let lastFocused = null;
    let trapHandler = null;

    function enableTrap() {
      const focusables = modal.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])');
      const list = Array.from(focusables).filter(el => !el.hasAttribute('disabled') && el.tabIndex !== -1);
      if (!list.length) return;
      const first = list[0];
      const last = list[list.length - 1];
      trapHandler = (e) => {
        if (e.key !== 'Tab') return;
        if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
        else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
      };
      modal.addEventListener('keydown', trapHandler);
      (btnClose || first || modal).focus();
    }

    function disableTrap() {
      if (trapHandler) {
        modal.removeEventListener('keydown', trapHandler);
        trapHandler = null;
      }
    }

    function openInvite() {
      lastFocused = document.activeElement;

      const url = INVITE_URL;
      if (qrImg) {
        qrImg.src = QR_ENDPOINT + encodeURIComponent(url);
        qrImg.alt = 'QR code for ' + url;
      }
      if (urlInput) {
        urlInput.value = url;
        setTimeout(() => {
          try { urlInput.focus({ preventScroll: true }); urlInput.setSelectionRange(url.length, url.length); } catch {}
          urlInput.scrollLeft = urlInput.scrollWidth;
        }, 0);
      }
      if (btnOpen) btnOpen.href = url;

      modal.classList.add('visible');
      modal.setAttribute('aria-hidden', 'false');

      document.addEventListener('keydown', onEsc, { once: true });
      enableTrap();
    }

    function closeInvite() {
      modal.classList.remove('visible');
      modal.setAttribute('aria-hidden', 'true');
      disableTrap();
      lastFocused?.focus?.();
    }

    function onEsc(e) { if (e.key === 'Escape') closeInvite(); }

    trigger.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      openInvite();
    });

    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeInvite();
    });

    if (btnClose) btnClose.addEventListener('click', closeInvite);
    if (btnCopy) {
      btnCopy.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(urlInput.value);
          toast('Link copied');
        } catch {
          urlInput?.select?.();
          toast('Copy failed — select and copy');
        }
      });
    }

    if (btnShare) {
      const canWebShare = typeof navigator !== 'undefined' && 'share' in navigator;
      if (!canWebShare) btnShare.style.display = 'none';

      btnShare.addEventListener('click', async () => {
        const url = (urlInput && urlInput.value) || INVITE_URL;
        try {
          if (navigator.canShare && !navigator.canShare({ url })) {
            throw new Error('URL sharing not supported');
          }
          await navigator.share({
            title: 'Naptio',
            text: 'Share Naptio with a friend:',
            url
          });
        } catch (err) {
          if (err && err.name === 'AbortError') return; // user canceled
          try {
            await navigator.clipboard.writeText(url);
            toast('Link copied');
          } catch {
            urlInput?.select?.();
            toast('Share failed — link selected to copy');
          }
        }
      });
    }
  })();
  </script>

  <!-- Scroll-aware header Pair CTA (hide over hero, show after scroll) -->
  <script>
    (() => {
      const hero = document.querySelector('.hero');
      const headerPair = document.querySelector('.header-pair');
      if (!hero || !headerPair || !('IntersectionObserver' in window)) return;

      const io = new IntersectionObserver(([entry]) => {
        const heroInView = entry.isIntersecting && entry.intersectionRatio > 0;
        headerPair.classList.toggle('is-sticky', !heroInView);
      }, { threshold: 0.2 });

      io.observe(hero);
    })();
  </script>

  <!-- Set aria-current on About when that page is active (header reused across pages) -->
  <script>
    (() => {
      const aboutLink = document.querySelector('nav.nav-left a[href*="/about"]');
      if (!aboutLink) return;
      try {
        const loc = location.pathname.replace(/\/+$/, '');
        if (loc.endsWith('/about')) aboutLink.setAttribute('aria-current','page');
      } catch {}
    })();
  </script>

  <script type="module">
    import { installLandingPairGate } from '/hungryface/home/landing-pair-gate.js';
    installLandingPairGate({
      cameraSelector: 'nav.nav-center a[href*="/webrtc/sender/secure/"]',
      viewerSelector: 'nav.nav-center a[href*="/webrtc/receiver/shared/alerts/dashboard/"]',
      pairRoute: '/hungryface/webrtc/pairpsk/',
    });
  </script>

  <!-- analytics -->
  <script type="module">
    import { installAnalytics } from '/hungryface/shared/analytics.js';
    window.analytics = installAnalytics({ feature: 'naptio-home' });
    // window.analytics.event('landing_opened');
  </script>
</body>
</html>
